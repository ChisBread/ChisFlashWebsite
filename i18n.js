// Internationalization data
const translations = {
    zh: {
        "header.subtitle": "DIY ç¡¬ä»¶ç¤¾åŒº - åœ¨ä½ çš„åˆ›ä½œä¸Šæ ‡æ³¨ \"Chis\"",
        "intro.title": "å…³äºŽ ChisFlash ç¤¾åŒº",
        "intro.description": "ChisFlash ç¤¾åŒºæ˜¯ä¸€ä¸ªå¼€æ”¾çš„ DIY ç¡¬ä»¶ç¤¾åŒºã€‚ä»»ä½•äººéƒ½å¯ä»¥åœ¨è‡ªå·±çš„ DIY äº§å“ä¸Šæ ‡æ³¨ \"Chis\"ï¼Œä»¥è¡¨æ˜Žä»–ä»¬æ˜¯è¿™ä¸ªåˆ›æ„ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚",
        "opensource.title": "ðŸ”“ å¼€æºé¡¹ç›®",
        "opensource.description": "è¿™äº›é¡¹ç›®å®Œå…¨å¼€æºï¼Œå¯ä¾›ç¤¾åŒºä½¿ç”¨ã€‚",
        "partialopensource.title": "ðŸ”“ éƒ¨åˆ†å¼€æºé¡¹ç›®",
        "partialopensource.description": "è¿™äº›é¡¹ç›®å·²å¼€æºéƒ¨åˆ†ç»„ä»¶ã€‚",
        "closedsource.title": "ðŸ”’ æš‚æ— å¼€æºè®¡åˆ’çš„é¡¹ç›®",
        "closedsource.description": "è¿™äº›é¡¹ç›®æš‚æ— å¼€æºè®¡åˆ’ã€‚",
        "stores.title": "ðŸª å•†åº—å‚è€ƒåˆ—è¡¨",
        "stores.disclaimer": "âš ï¸ è¿™äº›å•†åº—ä¸Ž ChisFlash ç¤¾åŒºæ— å…³ã€‚æ­¤åˆ—è¡¨ä»…ä¾›å‚è€ƒã€‚è´­ä¹°å‰è¯·è‡ªè¡Œè°ƒæŸ¥ç ”ç©¶ã€‚",
        "stores.whitelist.title": "âœ… æŽ¨èå•†åº—",
        "stores.whitelist.description": "èŽ·å¾—è‰¯å¥½ç¤¾åŒºåé¦ˆçš„å•†åº—",
        "stores.blacklist.title": "âš ï¸ éœ€è°¨æ…Žå¯¹å¾…",
        "stores.blacklist.description": "æ”¶åˆ°è´Ÿé¢ç¤¾åŒºæŠ¥å‘Šçš„å•†åº—",
        "footer.contact.title": "è”ç³»æˆ‘ä»¬",
        "footer.contact.description": "å¦‚éœ€ç”³è¯·æ”¶å½•æˆ–æœ‰å…¶ä»–ç–‘é—®ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼š"
    },
    en: {
        "header.subtitle": "A DIY Hardware Community - Mark Your Creation with \"Chis\"",
        "intro.title": "About ChisFlash Community",
        "intro.description": "ChisFlash Community is an open DIY hardware community. Anyone can mark their DIY products with \"Chis\" to show they are part of this creative ecosystem.",
        "opensource.title": "ðŸ”“ Open Source Projects",
        "opensource.description": "These projects are fully open source and available for the community.",
        "partialopensource.title": "ðŸ”“ Partially Open Source Projects",
        "partialopensource.description": "These projects have some components open sourced.",
        "closedsource.title": "ðŸ”’ Projects Without Open Source Plans",
        "closedsource.description": "These projects currently have no plans to be open sourced.",
        "stores.title": "ðŸª Store References",
        "stores.disclaimer": "âš ï¸ These stores are NOT affiliated with ChisFlash Community. This list is for reference only. Please conduct your own research before purchasing.",
        "stores.whitelist.title": "âœ… Recommended Stores",
        "stores.whitelist.description": "Stores with good community feedback",
        "stores.blacklist.title": "âš ï¸ Caution Advised",
        "stores.blacklist.description": "Stores with negative community reports",
        "footer.contact.title": "Contact Us",
        "footer.contact.description": "For listing requests or other inquiries, please contact us:"
    },
    ja: {
        "header.subtitle": "DIY ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ - ã‚ãªãŸã®ä½œå“ã« \"Chis\" ã¨ãƒžãƒ¼ã‚¯ã—ã‚ˆã†",
        "intro.title": "ChisFlash ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã¤ã„ã¦",
        "intro.description": "ChisFlash ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ãª DIY ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã™ã€‚èª°ã§ã‚‚è‡ªåˆ†ã® DIY è£½å“ã« \"Chis\" ã¨ãƒžãƒ¼ã‚¯ã—ã¦ã€ã“ã®ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€éƒ¨ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚",
        "opensource.title": "ðŸ”“ ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
        "opensource.description": "ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®Œå…¨ã«ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚",
        "partialopensource.title": "ðŸ”“ éƒ¨åˆ†çš„ã«ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
        "partialopensource.description": "ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä¸€éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚",
        "closedsource.title": "ðŸ”’ ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åŒ–äºˆå®šãªã—ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
        "closedsource.description": "ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç¾åœ¨ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åŒ–ã®äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“ã€‚",
        "stores.title": "ðŸª ã‚¹ãƒˆã‚¢å‚è€ƒãƒªã‚¹ãƒˆ",
        "stores.disclaimer": "âš ï¸ ã“ã‚Œã‚‰ã®ã‚¹ãƒˆã‚¢ã¯ ChisFlash ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¨ã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ãƒªã‚¹ãƒˆã¯å‚è€ƒã®ã¿ã§ã™ã€‚è³¼å…¥å‰ã«ã”è‡ªèº«ã§èª¿æŸ»ã—ã¦ãã ã•ã„ã€‚",
        "stores.whitelist.title": "âœ… æŽ¨å¥¨ã‚¹ãƒˆã‚¢",
        "stores.whitelist.description": "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰è‰¯ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã¦ã„ã‚‹ã‚¹ãƒˆã‚¢",
        "stores.blacklist.title": "âš ï¸ æ³¨æ„ãŒå¿…è¦",
        "stores.blacklist.description": "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰å¦å®šçš„ãªå ±å‘ŠãŒã‚ã‚‹ã‚¹ãƒˆã‚¢",
        "footer.contact.title": "ãŠå•ã„åˆã‚ã›",
        "footer.contact.description": "æŽ²è¼‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ãã®ä»–ã®ãŠå•ã„åˆã‚ã›ã¯ã€ã“ã¡ã‚‰ã¾ã§ã”é€£çµ¡ãã ã•ã„ï¼š"
    }
};

let currentLanguage = 'zh';

// Switch language
function switchLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);

    // Update active button
    document.querySelectorAll('.language-switcher button').forEach(btn => {
        btn.classList.remove('active');
    });
    document.getElementById(`btn-${lang}`).classList.add('active');

    // Update HTML lang attribute
    document.documentElement.lang = lang === 'zh' ? 'zh-CN' : (lang === 'ja' ? 'ja' : 'en');

    // Update all translatable elements
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    // Reload dynamic content
    if (typeof loadProjects === 'function') {
        loadProjects();
    }
    if (typeof loadStores === 'function') {
        loadStores();
    }
}

// Initialize language on page load
function initLanguage() {
    const savedLang = localStorage.getItem('preferredLanguage') || 'zh';
    switchLanguage(savedLang);
}

// Auto-initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initLanguage);
} else {
    initLanguage();
}
